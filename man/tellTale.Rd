% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/telltale.R
\name{tellTale}
\alias{tellTale}
\title{Search and report on the features of TALE protein domains potentially encoded
in subject DNA sequences}
\usage{
tellTale(
  subjectFile,
  outputDir = getwd(),
  hmmFilesDir = system.file("extdata", "hmmProfile", package = "tantale", mustWork = T),
  TALE_NtermDNAHitMinScore = 300,
  repeatDNAHitMinScore = 20,
  TALE_CtermDNAHitMinScore = 200,
  minDomainHitsPerSubjSeq = 4,
  mergeHits = TRUE,
  minGapWidth = 35,
  taleArrayStartAnchorCode = "NTERM",
  taleArrayEndAnchorCode = "CTERM",
  appendExtremityCodes = TRUE,
  rvdSep = "-",
  hmmerpath = system.file("tools", "hmmer-3.3", "bin", package = "tantale", mustWork =
    T),
  extendedLength = 300,
  talArrayCorrection = FALSE,
  refForTalArrayCorrection = system.file("extdata", "decipher_ref_tales_aa.fa.gz",
    package = "tantale", mustWork = T),
  frameShiftCorrection = -11,
  ...
)
}
\arguments{
\item{subjectFile}{Fasta file with DNA sequence(s) to be searched for the
presence of TALE coding sequences (CDS).}

\item{outputDir}{Path of the output directory. If not specified, results will
be written to current working folder.}

\item{hmmFilesDir}{Specify the path to a folder holding the hmmfiles if you
do not want to use the ones provided with tantale.}

\item{TALE_NtermDNAHitMinScore}{Minimal nhmmer score cut_off value to
consider the hit as genuine}

\item{repeatDNAHitMinScore}{Minimal nhmmer score cut_off value to consider
the hit as genuine}

\item{TALE_CtermDNAHitMinScore}{Minimal nhmmer score cut_off value to
consider the hit as genuine}

\item{minDomainHitsPerSubjSeq}{Minimum number of nhmmer hits for a subject
sequence to be reported as having TALE diagnostic regions. This is a way to
simplify output a little by getting ride of uninformative sequences}

\item{mergeHits}{Perform overlapping hits merging per domain type. Should not be modified.}

\item{minGapWidth}{Minimum gap in base pairs between two tale domain hits for
them to be considered distinct. If the length of the gap is below this
value, domains are considered "contiguous" and grouped in the same array.}

\item{taleArrayStartAnchorCode}{This scalar character vector will symbolize a
TALE N-TERM CDS hit in the RVD sequence}

\item{taleArrayEndAnchorCode}{This scalar character vector will symbolize a
TALE C-TERM CDS hit in the RVD sequence}

\item{appendExtremityCodes}{Set this to \code{FALSE} if you do not want the
N- and C-TREM anchor codes in the output sequences of RVD}

\item{rvdSep}{Symbol acting as a separator in RVD sequences}

\item{hmmerpath}{Specify the path to a directory holding the HMMER
executable if you do not want to use the ones provided with tantale.}

\item{extendedLength}{number of nucleotides to extend in 3'-end at the tal ORF prediction stage.}

\item{talArrayCorrection}{True or False}

\item{refForTalArrayCorrection}{Reference AA sequences for tal array predicted ORF correction if you do not want to use the ones provided with tantale.}

\item{frameShiftCorrection}{default = 11}

\item{...}{\code{\link[DECIPHER:CorrectFrameshifts]{CorrectFrameshifts}}}
}
\value{
This functions has only side effects (writing files, mostly).
  However, if everything ran smoothly, it will invisibly return the path of
  the directory where output files were written. In the arrayReport.tsv,
  column \emph{predicted_dels_count}/\emph{predicted_ins_count} shows the
  number of putative deletions/insertions in the raw sequences that have been
  corrected in the corrected sequences with the
  function \code{\link[DECIPHER:CorrectFrameshifts]{CorrectFrameshifts}}.
  
  
  List of output files:
  \itemize{
  \item allRanges.gff: gff file of all Tal arrays detected by HMMer
  \item arrayReport.tsv: report of all Tal arrays
  \item hitsReport.tsv: report of all hits detected by HMMer
  \item hitsReport.gff: gff file of all hits detected by HMMer
  \item domainsReport.tsv: report of all Tal domains detected by AnnoTALE analyze
  \item putativeTalOrf.fasta: Tal putative ORFs
  \item pseudoTalCds.fasta: pseudo Tal CDS, Tal arrays detected by HMMer but failed in AnnoTALE analyze
  \item C-terminusAAAlignment.html: protein alignment of all C-termini
  \item C-terminusDNAAlignment.html: DNA alignment of all C-termini
  \item N-terminusAAAlignment.html: protein alignment of all N-termini
  \item N-terminusDNAAlignment.html: DNA alignment of all N-termini
  \item TALE_CDS_all_diagnostic_regions_hmmfile.out: HMMER profile used for tale cds search.
  \item hmmerSearchOut.txt: ignore
  \item nhmmerHumanReadableOutputOfLastRun.txt: primary HMMER output file.
  \item tellTale.log: a log file
  \item annotale folder: folder containing result of AnnoTALE analyze for all Tal arrays
  \item CorrectionAlignmentAA folder: folder containing protein alignment of Tal array detected by HMMer and corrected Tal array if \code{talArrayCorrection} = TRUE
  \item CorrectionAlignmentDNA folder: folder containing DNA alignment of Tal array detected by HMMer and corrected Tal array if \code{talArrayCorrection} = TRUE
}
}
\description{
\code{tellTale} has been primarily written to report on 'corrected' TALE RVD
sequences in indels prone, noisy DNA sequences (suboptimally polished genomes assembly, raw
reads of long read sequencing technologies [eg PacBio, ONT]) that would
otherwise be missed by conventional tools (eg AnnoTALE).
}
\details{
The approach is first to use \href{http://hmmer.org/}{HMMER}
to find and categorize regions in the input DNA sequence that are related to 
the coding sequence of canonical TALE protein domains (N-Term, repeats, C-term).
Hits that are (nearly [see the minGapWidth parameter]) adjacent are grouped in
"taleArrays" which are considered as potential tal genes.

 
If the \code{talArrayCorrection} parameter is turned off, the longest predicted
open reading frame for each talArray is 
fed to \href{http://www.jstacs.de/index.php/AnnoTALE}{AnnoTALE} to detect
TALE domains in the predicted translation product. The Results should hence
be very similar to what would be obtained with AnnoTALE,
plus many additional informative output files such as tabular reports.

If \code{talArrayCorrection} is turned on, these talearrays are passed to the \code{\link[DECIPHER:CorrectFrameshifts]{CorrectFrameshifts}} function that attemps to 'correct'
potential frameshifts in the taleArray sequences. This conveniently removes 
many artefactual indels but bear in mind that this may also \strong{erroneously} 'correct'
genuine frame shifts which can be highly relevant especially for truncTALEs or iTALES.
The resulting 'corrected' taleArray open reading frames are then passed to AnnoTALE.

Note that occasionally, when a putative open reading frame does not encode 
a canonical TALE protein (early frame shift, incomplete ORF, etc...),
the "analyze" module of AnnoTALE outputs DNA parts but no protein parts
and/or RVD sequence. This should be detected and reported in the tellTale log.
}
